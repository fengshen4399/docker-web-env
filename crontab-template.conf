# 定时任务配置文件 - 容器启动时自动加载
# 格式: 分(0-59) 时(0-23) 日(1-31) 月(1-12) 周(0-7) 命令
# 所有任务的日志都会保存到 /var/log/crontasks/ 目录下
# 修改此文件后请执行: docker exec my_web cron-manager reload

# 设置环境变量 - 确保cron任务能找到所有命令
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
SHELL=/bin/bash

# 每6小时检查磁盘使用
0 */6 * * * df -h >> /var/log/crontasks/disk_usage.log 2>&1

# 每天凌晨2点清理旧日志（保留7天）
0 2 * * * find /var/log/crontasks -name "*.log" -mtime +7 -delete >> /var/log/crontasks/cleanup.log 2>&1

# ==================== 示例任务（已注释） ====================
# 每5分钟执行一次
# */5 * * * * echo "每5分钟执行" >> /var/log/crontasks/test.log 2>&1

# PHP脚本执行示例
# 0 2 * * * cd /www && php backup.php >> /var/log/crontasks/backup.log 2>&1

# 数据备份示例
# 0 3 * * * cd /www && tar -czf /var/log/crontasks/backup_$(date +%Y%m%d).tar.gz . >> /var/log/crontasks/backup.log 2>&1

# 队列处理示例
# */10 * * * * cd /www && php artisan queue:work --stop-when-empty >> /var/log/crontasks/queue.log 2>&1

# ==================== 自定义任务区域 ====================
# 在下方添加你的定时任务

# ==================== 脚本方式执行多行任务 ====================
# 每5分钟执行综合监控（包含支付、渠道、预付费、商户余额监控）
*/5 * * * * /usr/local/bin/cron-scripts/comprehensive_monitor.sh

# 每天凌晨3点执行数据备份
#0 3 * * * /usr/local/bin/cron-scripts/backup.sh


# ==================== 单行命令方式 ====================
# 单个监控任务（如需独立执行可取消注释）
# */5 * * * * cd /www && php think payment:status:monitor >> /var/log/crontasks/payment_status_monitor.log 2>&1
# */5 * * * * cd /www && php think channel:balance:monitor >> /var/log/crontasks/channel_balance.log 2>&1
# */5 * * * * cd /www && php think prepaid:balance:monitor >> /var/log/crontasks/prepaid_balance.log 2>&1
# */5 * * * * cd /www && php think merchant:balance:monitor >> /var/log/crontasks/merchant_balance.log 2>&1
